<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VSF Documented: source/service/pool/vsf_pool.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VSF Documented
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_bfec2c9dca3d140a71292b4bdadc3c95.html">service</a></li><li class="navelem"><a class="el" href="dir_12b5089216a9b9e5a15b2f5c208fe21a.html">pool</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">vsf_pool.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="vsf__service__cfg_8h_source.html">service/vsf_service_cfg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vsf__pool_8h_source.html">vsf_pool.h</a>&quot;</code><br />
<code>#include &quot;hal/arch/vsf_arch.h&quot;</code><br />
<code>#include &quot;<a class="el" href="vsf__heap_8h_source.html">../heap/vsf_heap.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct____vsf__pool__node__t.html">__vsf_pool_node_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a73fbf09be3d1dfa0dc9357f0975556c2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a73fbf09be3d1dfa0dc9357f0975556c2">__VSF_POOL_CLASS_IMPLEMENT</a></td></tr>
<tr class="separator:a73fbf09be3d1dfa0dc9357f0975556c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a170ed34cb45d3bd351735c7521ba7aa6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a170ed34cb45d3bd351735c7521ba7aa6">vsf_this</a>&#160;&#160;&#160;(*this_ptr)</td></tr>
<tr class="separator:a170ed34cb45d3bd351735c7521ba7aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a829f2e020a057f4a39e561aafcc162fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a829f2e020a057f4a39e561aafcc162fd">VSF_POOL_LOCK</a>()&#160;&#160;&#160;vsf_this.region_ptr-&gt;enter()</td></tr>
<tr class="separator:a829f2e020a057f4a39e561aafcc162fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6574db8b71e76a56091d1845a884b10"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#ab6574db8b71e76a56091d1845a884b10">VSF_POOL_UNLOCK</a>()&#160;&#160;&#160;vsf_this.region_ptr-&gt;leave(orig)</td></tr>
<tr class="separator:ab6574db8b71e76a56091d1845a884b10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a659c70f973734073435357900e3f33d4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a659c70f973734073435357900e3f33d4">__VSF_POOL_USE_DEFAULT_ATOM_ACCESS</a></td></tr>
<tr class="separator:a659c70f973734073435357900e3f33d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0331f0f04839b40dd0417be57c51d282"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a0331f0f04839b40dd0417be57c51d282">VSF_POOL_CFG_SUPPORT_USER_ITEM_INIT</a>&#160;&#160;&#160;<a class="el" href="vsf__cfg_8h.html#a73c228f87e038e8295ee8ea8eceaa5ac">ENABLED</a></td></tr>
<tr class="separator:a0331f0f04839b40dd0417be57c51d282"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">protected class __vsf_pool_node_t</div></td></tr>
<tr class="memitem:af13c2a0b899a39a38726c62f7b193a8f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct____vsf__pool__node__t.html">__vsf_pool_node_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#af13c2a0b899a39a38726c62f7b193a8f">__vsf_pool_node_t</a></td></tr>
<tr class="separator:af13c2a0b899a39a38726c62f7b193a8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae0505942af0b04938c21bda84de5df31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#ae0505942af0b04938c21bda84de5df31">vsf_pool_init</a> (vsf_pool_t *obj_ptr, <a class="el" href="arm_2type_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="vsf__pool_8h.html#ad27d25a00990c74c7bf1cc2bca27b745">item_size</a>, <a class="el" href="arm_2type_8h.html#a226d967fb6d06433caf43f20dc876aae">uint_fast16_t</a> <a class="el" href="vsf__pool_8h.html#a4c7fdf7e103520180f0b529959b17dac">align</a>, <a class="el" href="vsf__pool_8h.html#abc12eca64e8c7d9b3028c3fa40dd2ad2">vsf_pool_cfg_t</a> *<a class="el" href="vsf__stream__writer_8h.html#a4867ae13f79e7bd89b5442224cdd20bd">cfg_ptr</a>)</td></tr>
<tr class="memdesc:ae0505942af0b04938c21bda84de5df31"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialise target pool !  <a href="vsf__pool_8c.html#ae0505942af0b04938c21bda84de5df31">More...</a><br /></td></tr>
<tr class="separator:ae0505942af0b04938c21bda84de5df31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c9f12c0f764f42e9329fceba6f7aea0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_2type_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a6c9f12c0f764f42e9329fceba6f7aea0">vsf_pool_add_buffer</a> (vsf_pool_t *this_ptr, <a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a> buffer_ptr, <a class="el" href="arm_2type_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> buffer_size, <a class="el" href="arm_2type_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="vsf__pool_8h.html#ad27d25a00990c74c7bf1cc2bca27b745">item_size</a>)</td></tr>
<tr class="memdesc:a6c9f12c0f764f42e9329fceba6f7aea0"><td class="mdescLeft">&#160;</td><td class="mdescRight">add memory to pool !  <a href="vsf__pool_8c.html#a6c9f12c0f764f42e9329fceba6f7aea0">More...</a><br /></td></tr>
<tr class="separator:a6c9f12c0f764f42e9329fceba6f7aea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a149f775a8848068daeff171673b31418"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_2type_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a149f775a8848068daeff171673b31418">vsf_plug_in_on_failed_to_feed_pool_on_heap</a> (vsf_pool_t *obj_ptr)</td></tr>
<tr class="separator:a149f775a8848068daeff171673b31418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dfe3e9ae6d5091a52a598d46cd222dc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a0dfe3e9ae6d5091a52a598d46cd222dc">vsf_pool_alloc</a> (vsf_pool_t *obj_ptr)</td></tr>
<tr class="memdesc:a0dfe3e9ae6d5091a52a598d46cd222dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">try to fetch a memory block from the target pool !  <a href="vsf__pool_8c.html#a0dfe3e9ae6d5091a52a598d46cd222dc">More...</a><br /></td></tr>
<tr class="separator:a0dfe3e9ae6d5091a52a598d46cd222dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cfd724746adcdff17810d36d0845598"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_2type_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a4cfd724746adcdff17810d36d0845598">vsf_pool_add_buffer_ex</a> (vsf_pool_t *obj_ptr, <a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a> buffer_ptr, <a class="el" href="arm_2type_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> buffer_size, <a class="el" href="arm_2type_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="vsf__pool_8h.html#ad27d25a00990c74c7bf1cc2bca27b745">item_size</a>, vsf_pool_item_init_evt_handler_t *item_init_fn)</td></tr>
<tr class="memdesc:a4cfd724746adcdff17810d36d0845598"><td class="mdescLeft">&#160;</td><td class="mdescRight">add memory to pool !  <a href="vsf__pool_8c.html#a4cfd724746adcdff17810d36d0845598">More...</a><br /></td></tr>
<tr class="separator:a4cfd724746adcdff17810d36d0845598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade8e690c124fc773aafbed53279fee2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#ade8e690c124fc773aafbed53279fee2d">vsf_pool_free</a> (vsf_pool_t *obj_ptr, <a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a> pItem)</td></tr>
<tr class="memdesc:ade8e690c124fc773aafbed53279fee2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">return a memory block to the target pool !  <a href="vsf__pool_8c.html#ade8e690c124fc773aafbed53279fee2d">More...</a><br /></td></tr>
<tr class="separator:ade8e690c124fc773aafbed53279fee2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d3f4a3634a10c1eb33ed90eaf89bc62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_2type_8h.html#a226d967fb6d06433caf43f20dc876aae">uint_fast16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a9d3f4a3634a10c1eb33ed90eaf89bc62">vsf_pool_get_count</a> (vsf_pool_t *obj_ptr)</td></tr>
<tr class="memdesc:a9d3f4a3634a10c1eb33ed90eaf89bc62"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the number of memory blocks available in the target pool !  <a href="vsf__pool_8c.html#a9d3f4a3634a10c1eb33ed90eaf89bc62">More...</a><br /></td></tr>
<tr class="separator:a9d3f4a3634a10c1eb33ed90eaf89bc62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca90e14bc04840a37393a7e2512135c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a4ca90e14bc04840a37393a7e2512135c">vsf_pool_get_tag</a> (vsf_pool_t *obj_ptr)</td></tr>
<tr class="memdesc:a4ca90e14bc04840a37393a7e2512135c"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the address of the object which is attached to the pool !  <a href="vsf__pool_8c.html#a4ca90e14bc04840a37393a7e2512135c">More...</a><br /></td></tr>
<tr class="separator:a4ca90e14bc04840a37393a7e2512135c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01845048250d0cdb1b4e9ada77069144"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a01845048250d0cdb1b4e9ada77069144">vsf_pool_set_tag</a> (vsf_pool_t *obj_ptr, <a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a> target_ptr)</td></tr>
<tr class="memdesc:a01845048250d0cdb1b4e9ada77069144"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the address of the object which is attached to the pool !  <a href="vsf__pool_8c.html#a01845048250d0cdb1b4e9ada77069144">More...</a><br /></td></tr>
<tr class="separator:a01845048250d0cdb1b4e9ada77069144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b2dfba9ef7f2e453e4d240e84a3f7ae"><td class="memItemLeft" align="right" valign="top">vsf_protect_region_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#a4b2dfba9ef7f2e453e4d240e84a3f7ae">vsf_pool_get_region</a> (vsf_pool_t *obj_ptr)</td></tr>
<tr class="memdesc:a4b2dfba9ef7f2e453e4d240e84a3f7ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the address of the code region used by this pool !  <a href="vsf__pool_8c.html#a4b2dfba9ef7f2e453e4d240e84a3f7ae">More...</a><br /></td></tr>
<tr class="separator:a4b2dfba9ef7f2e453e4d240e84a3f7ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa98ef64b200548a2ee7588cfc532b131"><td class="memItemLeft" align="right" valign="top">const i_pool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsf__pool_8c.html#aa98ef64b200548a2ee7588cfc532b131">VSF_POOL</a></td></tr>
<tr class="separator:aa98ef64b200548a2ee7588cfc532b131"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a73fbf09be3d1dfa0dc9357f0975556c2" name="a73fbf09be3d1dfa0dc9357f0975556c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73fbf09be3d1dfa0dc9357f0975556c2">&#9670;&nbsp;</a></span>__VSF_POOL_CLASS_IMPLEMENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __VSF_POOL_CLASS_IMPLEMENT</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a170ed34cb45d3bd351735c7521ba7aa6" name="a170ed34cb45d3bd351735c7521ba7aa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a170ed34cb45d3bd351735c7521ba7aa6">&#9670;&nbsp;</a></span>vsf_this</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define vsf_this&#160;&#160;&#160;(*this_ptr)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a829f2e020a057f4a39e561aafcc162fd" name="a829f2e020a057f4a39e561aafcc162fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a829f2e020a057f4a39e561aafcc162fd">&#9670;&nbsp;</a></span>VSF_POOL_LOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VSF_POOL_LOCK</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;vsf_this.region_ptr-&gt;enter()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab6574db8b71e76a56091d1845a884b10" name="ab6574db8b71e76a56091d1845a884b10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6574db8b71e76a56091d1845a884b10">&#9670;&nbsp;</a></span>VSF_POOL_UNLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VSF_POOL_UNLOCK</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;vsf_this.region_ptr-&gt;leave(orig)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a659c70f973734073435357900e3f33d4" name="a659c70f973734073435357900e3f33d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a659c70f973734073435357900e3f33d4">&#9670;&nbsp;</a></span>__VSF_POOL_USE_DEFAULT_ATOM_ACCESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __VSF_POOL_USE_DEFAULT_ATOM_ACCESS</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0331f0f04839b40dd0417be57c51d282" name="a0331f0f04839b40dd0417be57c51d282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0331f0f04839b40dd0417be57c51d282">&#9670;&nbsp;</a></span>VSF_POOL_CFG_SUPPORT_USER_ITEM_INIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VSF_POOL_CFG_SUPPORT_USER_ITEM_INIT&#160;&#160;&#160;<a class="el" href="vsf__cfg_8h.html#a73c228f87e038e8295ee8ea8eceaa5ac">ENABLED</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="af13c2a0b899a39a38726c62f7b193a8f" name="af13c2a0b899a39a38726c62f7b193a8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af13c2a0b899a39a38726c62f7b193a8f">&#9670;&nbsp;</a></span>__vsf_pool_node_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct____vsf__pool__node__t.html">__vsf_pool_node_t</a> <a class="el" href="struct____vsf__pool__node__t.html">__vsf_pool_node_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae0505942af0b04938c21bda84de5df31" name="ae0505942af0b04938c21bda84de5df31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0505942af0b04938c21bda84de5df31">&#9670;&nbsp;</a></span>vsf_pool_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vsf_pool_init </td>
          <td>(</td>
          <td class="paramtype">vsf_pool_t *&#160;</td>
          <td class="paramname"><em>obj_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_2type_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>item_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_2type_8h.html#a226d967fb6d06433caf43f20dc876aae">uint_fast16_t</a>&#160;</td>
          <td class="paramname"><em>align</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vsf__pool_8h.html#abc12eca64e8c7d9b3028c3fa40dd2ad2">vsf_pool_cfg_t</a> *&#160;</td>
          <td class="paramname"><em>cfg_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialise target pool ! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this_ptr</td><td>address of the target pool !</td></tr>
    <tr><td class="paramname">cfg_ptr</td><td>configurations ! </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>
<p >add pool to the pool list</p>

</div>
</div>
<a id="a6c9f12c0f764f42e9329fceba6f7aea0" name="a6c9f12c0f764f42e9329fceba6f7aea0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c9f12c0f764f42e9329fceba6f7aea0">&#9670;&nbsp;</a></span>vsf_pool_add_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_2type_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a> vsf_pool_add_buffer </td>
          <td>(</td>
          <td class="paramtype">vsf_pool_t *&#160;</td>
          <td class="paramname"><em>this_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a>&#160;</td>
          <td class="paramname"><em>buffer_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_2type_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_2type_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>item_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>add memory to pool ! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this_ptr</td><td>address of the target pool !</td></tr>
    <tr><td class="paramname">buffer_ptr</td><td>address of the target memory !</td></tr>
    <tr><td class="paramname">buffer_size</td><td>the size of the target memory !</td></tr>
    <tr><td class="paramname">item_size</td><td>memory block size of the pool !</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>the buffer size is too small or invalid parameters !</td></tr>
    <tr><td class="paramname">true</td><td>buffer is added </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a149f775a8848068daeff171673b31418" name="a149f775a8848068daeff171673b31418"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a149f775a8848068daeff171673b31418">&#9670;&nbsp;</a></span>vsf_plug_in_on_failed_to_feed_pool_on_heap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_2type_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a> vsf_plug_in_on_failed_to_feed_pool_on_heap </td>
          <td>(</td>
          <td class="paramtype">vsf_pool_t *&#160;</td>
          <td class="paramname"><em>obj_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>return true will let the vsf_pool try again. Usually we can use this function to print out the heap and pool usage info. You can also use this function to allocate more resources to either pool or heap and ask vsf pool to try again.</dd></dl>

</div>
</div>
<a id="a0dfe3e9ae6d5091a52a598d46cd222dc" name="a0dfe3e9ae6d5091a52a598d46cd222dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dfe3e9ae6d5091a52a598d46cd222dc">&#9670;&nbsp;</a></span>vsf_pool_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a> vsf_pool_alloc </td>
          <td>(</td>
          <td class="paramtype">vsf_pool_t *&#160;</td>
          <td class="paramname"><em>obj_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>try to fetch a memory block from the target pool ! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this_ptr</td><td>address of the target pool !</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>the pool is empty !</td></tr>
    <tr><td class="paramname">!NULL</td><td>address of the allocated memory block </td></tr>
  </table>
  </dd>
</dl>
<p >feed on heap</p>

</div>
</div>
<a id="a4cfd724746adcdff17810d36d0845598" name="a4cfd724746adcdff17810d36d0845598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cfd724746adcdff17810d36d0845598">&#9670;&nbsp;</a></span>vsf_pool_add_buffer_ex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_2type_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a> vsf_pool_add_buffer_ex </td>
          <td>(</td>
          <td class="paramtype">vsf_pool_t *&#160;</td>
          <td class="paramname"><em>obj_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a>&#160;</td>
          <td class="paramname"><em>buffer_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_2type_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_2type_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>item_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vsf_pool_item_init_evt_handler_t *&#160;</td>
          <td class="paramname"><em>item_init_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>add memory to pool ! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this_ptr</td><td>address of the target pool !</td></tr>
    <tr><td class="paramname">buffer_ptr</td><td>address of the target memory !</td></tr>
    <tr><td class="paramname">buffer_size</td><td>the size of the target memory !</td></tr>
    <tr><td class="paramname">item_size</td><td>memory block size of the pool !</td></tr>
    <tr><td class="paramname">item_init_fn</td><td>block initialisation handler !</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>the buffer size is too small or invalid parameters !</td></tr>
    <tr><td class="paramname">true</td><td>buffer is added </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ade8e690c124fc773aafbed53279fee2d" name="ade8e690c124fc773aafbed53279fee2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade8e690c124fc773aafbed53279fee2d">&#9670;&nbsp;</a></span>vsf_pool_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vsf_pool_free </td>
          <td>(</td>
          <td class="paramtype">vsf_pool_t *&#160;</td>
          <td class="paramname"><em>obj_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a>&#160;</td>
          <td class="paramname"><em>pItem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return a memory block to the target pool ! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this_ptr</td><td>address of the target pool !</td></tr>
    <tr><td class="paramname">pItem</td><td>target memory block ! </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="a9d3f4a3634a10c1eb33ed90eaf89bc62" name="a9d3f4a3634a10c1eb33ed90eaf89bc62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d3f4a3634a10c1eb33ed90eaf89bc62">&#9670;&nbsp;</a></span>vsf_pool_get_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_2type_8h.html#a226d967fb6d06433caf43f20dc876aae">uint_fast16_t</a> vsf_pool_get_count </td>
          <td>(</td>
          <td class="paramtype">vsf_pool_t *&#160;</td>
          <td class="paramname"><em>obj_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get the number of memory blocks available in the target pool ! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this_ptr</td><td>address of the target pool ! </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of memory blocks </dd></dl>

</div>
</div>
<a id="a4ca90e14bc04840a37393a7e2512135c" name="a4ca90e14bc04840a37393a7e2512135c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ca90e14bc04840a37393a7e2512135c">&#9670;&nbsp;</a></span>vsf_pool_get_tag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a> vsf_pool_get_tag </td>
          <td>(</td>
          <td class="paramtype">vsf_pool_t *&#160;</td>
          <td class="paramname"><em>obj_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get the address of the object which is attached to the pool ! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this_ptr</td><td>address of the target pool ! </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the address of the object </dd></dl>

</div>
</div>
<a id="a01845048250d0cdb1b4e9ada77069144" name="a01845048250d0cdb1b4e9ada77069144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01845048250d0cdb1b4e9ada77069144">&#9670;&nbsp;</a></span>vsf_pool_set_tag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a> vsf_pool_set_tag </td>
          <td>(</td>
          <td class="paramtype">vsf_pool_t *&#160;</td>
          <td class="paramname"><em>obj_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_2type_8h.html#a09674b9e56fd7a93a2169aa9210deec7">uintptr_t</a>&#160;</td>
          <td class="paramname"><em>target_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the address of the object which is attached to the pool ! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this_ptr</td><td>address of the target pool ! </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the address of the object </dd></dl>

</div>
</div>
<a id="a4b2dfba9ef7f2e453e4d240e84a3f7ae" name="a4b2dfba9ef7f2e453e4d240e84a3f7ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b2dfba9ef7f2e453e4d240e84a3f7ae">&#9670;&nbsp;</a></span>vsf_pool_get_region()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vsf_protect_region_t * vsf_pool_get_region </td>
          <td>(</td>
          <td class="paramtype">vsf_pool_t *&#160;</td>
          <td class="paramname"><em>obj_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get the address of the code region used by this pool ! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">this_ptr</td><td>address of the target pool ! </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the address of the code region </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa98ef64b200548a2ee7588cfc532b131" name="aa98ef64b200548a2ee7588cfc532b131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa98ef64b200548a2ee7588cfc532b131">&#9670;&nbsp;</a></span>VSF_POOL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const i_pool_t VSF_POOL</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7a9b9d65338f50cfe02a234e691d5a31" name="a7a9b9d65338f50cfe02a234e691d5a31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a9b9d65338f50cfe02a234e691d5a31">&#9670;&nbsp;</a></span>pool_list</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvsf__slist__t.html">vsf_slist_t</a> pool_list</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a777e1288fdf67db2f87e7bed860fefc0" name="a777e1288fdf67db2f87e7bed860fefc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a777e1288fdf67db2f87e7bed860fefc0">&#9670;&nbsp;</a></span>pool_cnt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_2type_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> pool_cnt</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
